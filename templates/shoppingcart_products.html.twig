{% extends 'partials/shoppingcart_core_base.html.twig' %}

{% block content %}
    {% include 'partials/shoppingcart_core_cart.html.twig' %}

    <script>
    (function() {
        ShoppingCart.currentPageIsProducts = true;
        // Define currentProducts.
        ShoppingCart.currentProducts = [];
    }());
    </script>

    {{ parent() }}

    <div class="content-wrapper">
        {{ page.content }}

        <div class="shoppingcart-products block-group">
            {% for child in page.collection() %}
                {% if (child.header.unpublished is not defined or (child.header.unpublished == false)) %}
                    <!-- Displays template depending on header option -->
                    {% if page.header.display_add_to_cart %}
                        {% include 'partials/shoppingcart_core_detail_item.html.twig' with {'page': child, 'parent': page, 'has_cart': true} %}
                    {% else %}
                        {% include 'partials/shoppingcart_core_product_item.html.twig' with {'page': child, 'parent': page} %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}


